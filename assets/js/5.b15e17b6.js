(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{156:function(s,t,a){s.exports=a.p+"assets/img/4.8f5516b2.png"},157:function(s,t,a){s.exports=a.p+"assets/img/3.3231c8ab.png"},158:function(s,t,a){s.exports=a.p+"assets/img/2.fa1f790c.png"},159:function(s,t,a){s.exports=a.p+"assets/img/1.08c54d66.png"},173:function(s,t,a){"use strict";a.r(t);var n=[function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"如何用node实现命令行工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何用node实现命令行工具","aria-hidden":"true"}},[s._v("#")]),s._v(" 如何用node实现命令行工具")]),n("h3",{attrs:{id:"介绍概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#介绍概念","aria-hidden":"true"}},[s._v("#")]),s._v(" 介绍概念")]),n("ol",[n("li",[s._v("脚本：假设我们创建了一个文件为script.js，这个文件称为脚本")]),n("li",[s._v("运行脚本："),n("code",[s._v("node script.js")]),s._v("这个过程叫运行脚本")])]),n("h3",{attrs:{id:"从运行脚本到命令行工具经过哪些步骤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#从运行脚本到命令行工具经过哪些步骤","aria-hidden":"true"}},[s._v("#")]),s._v(" 从运行脚本到命令行工具经过哪些步骤")]),n("ol",[n("li",[s._v("创建脚本")]),n("li",[s._v("设置脚本运行环境")]),n("li",[s._v("修改脚本权限")]),n("li",[s._v("设置环境变量")]),n("li",[s._v("运行脚本")])]),n("h3",{attrs:{id:"一步一步实现一个命令行工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一步一步实现一个命令行工具","aria-hidden":"true"}},[s._v("#")]),s._v(" 一步一步实现一个命令行工具")]),n("ol",[n("li",[s._v("node script.js 阶段")])]),n("ul",[n("li",[s._v("新建一个文件夹 "),n("code",[s._v("mkdir node-tool")])]),n("li",[n("code",[s._v("cd node-tool")])]),n("li",[s._v("新建一个文件，"),n("code",[s._v("touch script.js")]),s._v(", 内容"),n("code",[s._v("console.log('Hi, node tool');")])]),n("li",[s._v("命令行执行"),n("code",[s._v("node script.js")])])]),n("ol",{attrs:{start:"2"}},[n("li",[n("code",[s._v("./script.js")]),s._v(" 阶段")])]),n("ul",[n("li",[s._v("在命令行直接执行"),n("code",[s._v("./script.js")]),s._v("会提示"),n("code",[s._v("permission denied: ./script.js")]),s._v("，这是因为我们没有执行权限，解决办法\n"),n("code",[s._v("chmod -R 777 script.js")])]),n("li",[s._v("继续执行"),n("code",[s._v("./script.js")]),s._v("，报错如下\n"),n("img",{attrs:{src:a(159),alt:"img"}}),s._v("\n这是因为脚本默认的执行环境是shell，shell里没有"),n("code",[s._v("console.log")]),s._v("，需要我们指定脚本的执行环境，修改后的script.js")])]),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("#"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),n("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("node\nconsole"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("log")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'Hi, node tool'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),n("ul",[n("li",[s._v("我们想直接在命令行运行script.js，这样看起来像一个完整的命令，执行后报错\n"),n("img",{attrs:{src:a(158),alt:"img"}})])]),n("p",[s._v("这里我们要清楚一点：可以直接在命令行里执行的命令是因为我们把它放在了/usr/local/bin/目录下，我们可以尝试手动复制script.js到bin下，执行script.js，可以正常执行，所以我们的思路就是想办法把script.js命令和环境变量管理起来，在命令行里面执行："),n("code",[s._v("ln script.js /usr/local/bin/script")]),s._v("，这行命令是将script.js复制到bin下为script。")]),n("ol",{attrs:{start:"3"}},[n("li",[n("code",[s._v("script")]),s._v("阶段\n我们创建一个package.json文件，并添加下列代码")])]),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{attrs:{class:"token string"}},[s._v('"bin"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"my-script"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"./script.js"')]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),n("p",[s._v("然后在命令行输入npm link,出现\n"),n("img",{attrs:{src:a(157),alt:"img"}}),s._v("\n我们可以在node/xxx/bin/下看见myscript文件\n"),n("img",{attrs:{src:a(156),alt:"img"}}),s._v("\n此时我们在任何地方都可以执行my-script命令")]),n("p",[s._v("以上3步可以简单的实现一个命令行工具。")]),n("p",[s._v("删除命令行工具："),n("code",[s._v("npm unlink")])])])}],r=a(0),c=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);t.default=c.exports}}]);