(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{150:function(t,n,s){"use strict";s.r(n);var a=s(0),e=Object(a.a)({},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"content"},[t._m(0),t._m(1),s("ul",[s("li",[t._v("注册一个"),s("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm账号"),s("OutboundLink")],1)]),t._m(2)]),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),t._m(12),t._m(13),t._m(14)])},[function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"如何发布一个npm-module包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何发布一个npm-module包","aria-hidden":"true"}},[this._v("#")]),this._v(" 如何发布一个npm module包")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h6",{attrs:{id:"_1-如何创建并发布一个npm包？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-如何创建并发布一个npm包？","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.如何创建并发布一个npm包？")])},function(){var t=this.$createElement,n=this._self._c||t;return n("li",[this._v("在shell里输入"),n("code",[this._v("npm login")]),this._v("回车，依次输入Username，Password，Email，即可在命令行登录npm")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h6",{attrs:{id:"_2-创建一个文件夹npmmodule，建新文件index-js和package-json"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建一个文件夹npmmodule，建新文件index-js和package-json","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.创建一个文件夹npmModule，建新文件index.js和package.json")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("  "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("echoDate")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" date "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" year "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" date"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getFullYear")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" month "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" date"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getMonth")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("1")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" day "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" date"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getDay")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hour "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" date"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getHours")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" minute "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" date"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getMinutes")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token template-string"}},[s("span",{attrs:{class:"token string"}},[t._v("`现在是 ")]),s("span",{attrs:{class:"token interpolation"}},[s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("year"),s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{attrs:{class:"token string"}},[t._v("年")]),s("span",{attrs:{class:"token interpolation"}},[s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("month"),s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{attrs:{class:"token string"}},[t._v("月")]),s("span",{attrs:{class:"token interpolation"}},[s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("day"),s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{attrs:{class:"token string"}},[t._v("日")]),s("span",{attrs:{class:"token interpolation"}},[s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("hour"),s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{attrs:{class:"token string"}},[t._v("时")]),s("span",{attrs:{class:"token interpolation"}},[s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("minute"),s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{attrs:{class:"token string"}},[t._v("分，欢迎")]),s("span",{attrs:{class:"token interpolation"}},[s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("name"),s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{attrs:{class:"token string"}},[t._v("童鞋来到shell 世界～`")])]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  module"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" echoDate"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h6",{attrs:{id:"_3-项目结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-项目结构","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.项目结构")])},function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"language-tree extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[this._v("├── bin\n│   ├── index.js\n├── index.js\n├── package.json\n\n###### 4.发布\n首次发布不需要更新版本号，后面修改npm module再次发布需要执行`npm dispatch`更新npm version，然后执行`npm publish`，注意npm包名不能与其他开发者已经发布的包重复，然后过一分钟去npm官网的settings里查看自己的包\n\n###### 6.全局包 VS 局部包\n上面的包其实是一个局部包，我们重新创建一个文件夹npmModuleDemo，然后执行`npm init -y`生成package.json文件，然后执行npm i echodate -S，如何创建一个全局包？\n\n- 建bin文件夹，建index.js：\n```javascript\n#!/usr/bin/env node\nvar echoDate = require('../index')\nvar arguments = process.argv.slice(2)\nconsole.log(echoDate(arguments[0]))\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("其中"),n("code",[this._v("!/usr/bin/env node")]),this._v("\t表示当前文件执行环境是node，在shell脚本里执行普通js文件需要执行node先切换到node环境，这行代码相当于自动帮我们切到node环境下，然后可以直接调用echoDate。")])},function(){var t=this.$createElement,n=this._self._c||t;return n("ul",[n("li",[this._v("在package.json里加上")])])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("  "),s("span",{attrs:{class:"token string"}},[t._v('"bin"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v('"echodate"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"./bin/index.js"')]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("然后执行第4步，这样就可以创建一个全局包。\n总结：创建全局包需要指定文件执行环境，"),n("code",[this._v("!/usr/bin/env node")]),this._v("或者其他sh环境，py环境，然后放在"),n("code",[this._v("/Users/${ucomputername}/.nvm/versions/node/${node-version}/bin/")]),this._v("下")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h6",{attrs:{id:"我们来思考下全局包和局部包有何不同？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#我们来思考下全局包和局部包有何不同？","aria-hidden":"true"}},[this._v("#")]),this._v(" 我们来思考下全局包和局部包有何不同？")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ul",[s("li",[t._v("局部包存在自己项目中的node_module里，在项目外无法调用到")]),s("li",[t._v("全局包存在与"),s("code",[t._v("/Users/${ucomputername}/.nvm/versions/node/${node-version}/bin/")]),t._v("，bin作为一个全局变量，存在于bin下的文件就可以在全局访问到，本地也可以访问到全局npm module，所以我们也可以直接在bin下手动添加一个文件，也是可以作为全局变量调用，这个文件必须要指定文件执行环境，eg："),s("code",[t._v("!/usr/bin/env node")]),t._v("，然后修改文件权限"),s("code",[t._v("chomd 777 fileName")]),t._v("。\n全局包和本地安装的包是两个完全独立的包，删除一个不会影响另外一个")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h6",{attrs:{id:"npm-link做了什么？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-link做了什么？","aria-hidden":"true"}},[this._v("#")]),this._v(" npm link做了什么？")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("npm link在全局的"),n("code",[this._v("{prefix}/lib/node_modules/<package>")]),this._v("目录创建一个symlink映射到npm link命令执行的文件夹下的package，也可以将任何bin里的命令映射到"),n("code",[this._v("{prefix}/bin/{name}")]),this._v(" ,这样我们可以在本地边开发边测试我们的npm mudole，这里全局和局部包为同一个包，取消关联用"),n("code",[this._v("npm unlink {name}")])])}],!1,null,null,null);n.default=e.exports}}]);